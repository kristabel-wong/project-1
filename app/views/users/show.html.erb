<% if @current_user.present?%>
    <% if @current_user.id == @user.id%>
        <h1>Your Profile</h1>
    <% else %>
        <h1><%= @user.first_name %> <%= @user.last_name %>'s Profile</h1>
    <% end %>
<% end %>

<ul>
<% if @user.image.present?%>
    <%= image_tag @user.image, :class => 'icon' %>
<% end %>
    <li>First Name: <%= @user.first_name %> </li>

 <% if @current_user.id == @user.id%>
    <li>Last Name: <%= @user.last_name %> </li>
    <li>Email Address: <%= @user.email %></li>

</ul>


<% if @current_user.id == @user.id%> <!-- only the user who created the trip can edit -->
    <button> <%= link_to 'Edit Profile', edit_user_path %></button>
    
    <% if @user.trips.present? %>
    <h2>Upcoming Driver Trips</h2>

        <% @user.trips.each do |trip| %>
        <% unless trip.date < Time.now %> <!-- this includes date and time -->
            <div> 
                <h3><%= link_to trip.title, trip %> - <%= trip.date.strftime '%A, %B %e' %> at <%= trip.time.strftime '%l:%M %p' %> <% if trip.bookings.count == trip.seat%> - FULLY BOOKED <% end %> </h3>
                <ul>
                    <li>Passengers: <%= trip.bookings.count %>  </li>
                    <li>Price: <%= number_to_currency trip.price, precision: 0 %></li>
                    <li>Car: <%= trip.car_make %> <%= trip.car_model %></li>
                    <%= link_to image_tag(trip.image, :class => 'thumb'), trip %>
                </ul>
            </div>
        <% end%>
        <% end%>


    <h2>Your Trip Bookings</h2>
        <% @user.trips.each do |trip| %>
            <ul>
                <% trip.bookings.each do |booking| %>
                    <li><%= booking.trip.title %> <br> 
                    <%= booking.user.first_name %> </li>
                <% end%>
            </ul>
        <% end %>
    <% end %>
    <% end %>

<% end %>


    <h2>Completed Trips</h2>
        <% @user.trips.each do |trip| %>
        <% unless trip.date > Time.now %> <!-- this includes date and time -->
            <div> 
                <h3><%= link_to trip.title, trip %> - <%= trip.date.strftime '%A, %B %e' %> at <%= trip.time.strftime '%l:%M %p' %> <% if trip.bookings.count == trip.seat%> - FULLY BOOKED <% end %> </h3>
                <ul>
                    <li>Passengers: <%= trip.bookings.count %>  </li>
                    <li>Price: <%= number_to_currency trip.price, precision: 0 %></li>
                    <li>Car: <%= trip.car_make %> <%= trip.car_model %></li>
                    <%= link_to image_tag(trip.image, :class => 'thumb'), trip %>
                </ul>
            </div>
        <% end%>
        <% end%>

        